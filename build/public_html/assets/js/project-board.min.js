function loadMyProfile(){$.ajax({url:"../resources/src/scripts/fetchProfile.php",type:"POST",dataType:"JSON",data:{requestType:"my"},success:function(e){$("input#userName").val(e.userName),$("textarea#userAbout").val(e.userAbout),$(".userEmail").text(e.userEmail),$(".uNameAjax").text(e.userName),$("img.uAvatarAjax").attr("src","uploads/users/"+e.userAvatar)},error:function(){}})}$(".buttonLogout").on("click",function(){$.ajax({url:"../resources/src/scripts/insertTimer.php",type:"POST",dataType:"JSON",data:{requestType:"check"},success:function(e){switch(e.code){case 200:window.location="../resources/src/scripts/logoutUser.php";break;case 404:$("#backToProject").attr("data-projectid",e.projectId),$("#timerCheckModal").modal("show");break;default:window.location="../resources/src/scripts/logoutUser.php"}},error:function(){alert(error)}})}),$("#backToProject").on("click",function(){var e=$(this).attr("data-projectid");window.location="task-board?project="+e}),$(document).ready(function(){loadMyProfile();var e=$("#_profile");e.validate({rules:{userName:{required:!0,minlength:2},userAbout:{minlength:10,maxlength:400}},messages:{userName:{required:"Prosím, zadajte meno.",minlength:"Meno musí obsahovať minimálne 2 znaky."},userAbout:{minlength:"Popis musí obsahovať minimálne 10 znakov.",maxlength:"Popis musí obsahovať maximálne 400 znakov."}},submitHandler:function(){if(e.valid())return $.ajax({url:"../resources/src/scripts/updateProfile.php",type:"POST",dataType:"JSON",data:e.serialize(),success:function(e){return loadMyProfile(),alert(e.msg),!1},error:function(){}}),!1}}),$("#_avatarForm").on("submit",function(e){e.preventDefault(),$.ajax({url:"../resources/src/scripts/uploadAvatar.php",method:"POST",data:new FormData(this),dataType:"json",contentType:!1,cache:!1,processData:!1,success:function(e){return"200"==e.code?(loadMyProfile(),$("#changeAvatarModal").modal("hide")):alert(e.msg),!1},error:function(){alert("error")}})}),$("#changeAvatarModal").on("hidden.bs.modal",function(){$("#profileModal").modal("show")}),$("#changeAvatarModal").on("show.bs.modal",function(){$("#profileModal").modal("hide")})}),$(document).ready(function(){bsCustomFileInput.init()}),flatpickr.localize(flatpickr.l10ns.sk),$(document).ready(function(){$(".datepickerStart").flatpickr({altInput:!0,altFormat:"d. F Y",dateFormat:"Y-m-d",defaultDate:new Date}),$(".datepickerEnd").flatpickr({altInput:!0,altFormat:"d. F Y",dateFormat:"Y-m-d",defaultDate:(new Date).fp_incr(1)})});var errorBox=$("#ajaxErrorsAlert"),errorBoxContent=$("#ajaxErrors"),errorMessage="";$(document).ready(function(){o();var e=$("#_project");function o(){$.ajax({url:"../resources/src/scripts/fetchProjects.php",type:"POST",data:{requestType:"all"},success:function(e){$("#mainContentView").html(e),$('[data-toggle="tooltip"]').tooltip()}})}function r(e,t){200==e?(errorMessage="<h6>Hurá! Všetko prebehlo OK.</h6>",$.each(t,function(e,t){errorMessage+="<p>"+t+"</p>"}),errorBox.addClass("alert alert-success"),errorBoxContent.html(errorMessage),errorBox.alert(),errorBox.fadeTo(5e3,5e3).slideUp(5e3,function(){})):404==e&&(errorMessage="<h6>Ooops. Našlo sa pár chýb.</h6>",$.each(t,function(e,t){errorMessage+="<p>"+t+"</p>"}),errorBox.addClass("alert alert-danger"),errorBoxContent.html(errorMessage),errorBox.alert(),errorBox.fadeTo(5e3,5e3).slideUp(5e3,function(){}))}e.validate({rules:{projectClient:{required:!0,minlength:2},projectName:{required:!0,minlength:2},projectDescription:{required:!0,minlength:10,maxlength:400},projectStatus:{required:!0},projectCategory:{required:!0},projectStart:{required:!0},projectEnd:{required:!0}},messages:{projectClient:{required:"Prosím, zadajte meno klienta.",minlength:"Názov musí obsahovať minimálne 2 znaky."},projectName:{required:"Prosím, zadajte názov projektu.",minlength:"Názov musí obsahovať minimálne 2 znaky."},projectDescription:{required:"Prosím, zadajte popis projektu.",minlength:"Popis musí obsahovať minimálne 10 znakov.",maxlength:"Popis musí obsahovať maximálne 400 znakov."},projectStatus:{required:"Prosím, zvoľte status projektu."},projectCategory:{required:"Prosím, zvoľte kategóriu projektu."},projectStart:{required:"Prosím, zvoľte začiatok projektu."},projectEnd:{required:"Prosím, zvoľte koniec projektu."}},submitHandler:function(){if(e.valid())return $.ajax({url:"../resources/src/scripts/insertProject.php",type:"POST",dataType:"JSON",data:e.serialize(),success:function(e){return r(e.code,e.msg),$("#newProjectModal").modal("hide"),o(),!1},error:function(){}}),!1}}),$(document).on("click",".btn-edit",function(){var e=$(this).data("id");$.ajax({url:"../resources/src/scripts/fetchProjects.php",type:"POST",dataType:"JSON",data:{id:e,requestType:"single"},success:function(e){$("#newProjectModalTitle").text("Úprava projektu"),$("#id").val(e.id),$("#createProjectButton").text("Upraviť"),$("#projectClient").val(e.projectClient),$("#projectName").val(e.projectName),$("#projectDescription").val(e.projectDescription),$("#projectStatus").val(e.projectStatus),$("#projectCategory").val(e.projectCategory),$("#projectStart").val(e.projectStart),$("#projectEnd").val(e.projectEnd),$(".datepickerEnd").val(e.projectEnd),$(".datepickerStart").flatpickr({altInput:!0,altFormat:"d. F Y",dateFormat:"Y-m-d",defaultDate:e.projectStart}),$(".datepickerEnd").flatpickr({altInput:!0,altFormat:"d. F Y",dateFormat:"Y-m-d",defaultDate:e.projectEnd}),$("#newProjectModal").modal("show"),$("#newProjectModal").on("shown.bs.modal",function(){var e=document.querySelector("#projectDescription");autosize.update(e)})},error:function(){}})}),$("#deleteProjectModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget).data("id");$("button#delete").click(function(){$.ajax({url:"../resources/src/scripts/deleteProject.php",type:"POST",dataType:"JSON",data:{id:t},success:function(e){r(e.code,e.msg),o(),$("#deleteProjectModal").modal("hide")}})})}),$(document).on("click","#btnActiveProjects",function(){$.ajax({url:"../resources/src/scripts/fetchProjects.php",type:"POST",data:{requestType:"active"},success:function(e){$("#projectContentBox").html(e),$('[data-toggle="tooltip"]').tooltip()}})}),$(document).on("click","#btnMyProjects",function(){$.ajax({url:"../resources/src/scripts/fetchProjects.php",type:"POST",data:{requestType:"my"},success:function(e){$("#projectContentBox").html(e),$('[data-toggle="tooltip"]').tooltip()}})}),$(document).on("click","#btnDoneProjects",function(){$.ajax({url:"../resources/src/scripts/fetchProjects.php",type:"POST",data:{requestType:"done"},success:function(e){$("#projectContentBox").html(e),$('[data-toggle="tooltip"]').tooltip()}})}),$(document).on("click","#btnAllProjects",function(){o()})}),$(document).ready(function(){$("#newProjectModal").on("hidden.bs.modal",function(){$("#_project")[0].reset(),$("#id").val(""),$("#_project").validate().resetForm(),$("em.invalid-feedback").remove(),$(".form-control").removeClass("is-invalid"),$(".datepickerStart").flatpickr({altInput:!0,altFormat:"d. F Y",dateFormat:"Y-m-d",defaultDate:"today"}),$(".datepickerEnd").flatpickr({altInput:!0,altFormat:"d. F Y",dateFormat:"Y-m-d",defaultDate:(new Date).fp_incr(1)}),$("#newProjectModalTitle").text("Vytvorenie nového projektu"),$("#createProjectButton").text("Vytvoriť")})}),$(document).ready(function(){$("#openSideMenu").click(function(){$("#mobileSideMenuBg").css({visibility:"visible","background-color":"rgba(0,0,0,0.8"}),$("#mobileSideMenu").css({left:"0vw","box-shadow":"6px 3px 6px rgba(0,0,0,0.16)"})}),$("#closeSideMenu, #mobileSideMenuBg, #mobileTimersLink").click(function(){$("#mobileSideMenu").css({left:"-100vw","box-shadow":"none"}),$("#mobileSideMenuBg").css({visibility:"hidden","background-color":"rgba(0,0,0,0"})}),$(".notificationLink").click(function(){$(".badge.up").css({display:"none"})}),$("#hideMainSidebar").click(function(){$("#mainSidebar").toggleClass("hidden"),$("#mainContent").toggleClass("marged customWidth")}),$(".modal").on("shown.bs.modal",function(){$("#mobileSideMenu").css({left:"-100vw","box-shadow":"none"}),$("#mobileSideMenuBg").css({visibility:"hidden","background-color":"rgba(0,0,0,0"})})}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip(),autosize(document.querySelectorAll("textarea"))});